"use strict";(self.webpackChunkcompany_admim=self.webpackChunkcompany_admim||[]).push([[570],{570:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(43),l=s(213),r=s(397);const i=["x","VIEW","COPY"],n=["/","/location","/role-selection","/main-skills","/relevant-skills","/experience","/monthly-rate","/commitment","/english-level","/availability","/links","/quiz-intro","/quiz","/video-intro","/complete"];var d=s(986),c=s(172),o=s(579);const x=e=>{let{width:t=40,color:s="grey"}=e;return(0,o.jsxs)("svg",{width:t,height:t/4,viewBox:"0 0 40 10",className:"anim-typing-loader",children:[(0,o.jsx)("circle",{className:"anim-typing-dot",cx:"10",cy:"5",r:"3",fill:s}),(0,o.jsx)("circle",{className:"anim-typing-dot",cx:"20",cy:"5",r:"3",fill:s}),(0,o.jsx)("circle",{className:"anim-typing-dot",cx:"30",cy:"5",r:"3",fill:s})]})};var h=s(387);function m(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const u=a.forwardRef(m);function p(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const j=a.forwardRef(p);var g=s(801);const b=e=>{let{apply:t,index:s}=e;const{addToast:n}=(0,g.d)(),[c,x]=(0,a.useState)(!1),{deleteApplication:m}=(0,d.A)();return(0,o.jsxs)("div",{className:(0,h.A)("border border-indigo-500 rounded-xl px-4 py-2 transition-all relative",{"bg-gray-50":!t.updated,"bg-red-100":t.updated}),children:[(0,o.jsxs)("div",{className:"flex justify-between items-center gap-4 cursor-pointer",onClick:async()=>{try{!c&&t.updated&&await l.A.patch(`${r.qp}/applications/${t._id}`)}catch(e){console.log(e)}finally{x(!c)}},children:[(0,o.jsxs)("div",{className:"w-full flex items-center gap-4",children:[t.user&&(0,o.jsxs)("div",{className:"min-w-52",children:[(0,o.jsx)("p",{className:"pl-2 text-lg font-semibold border-b border-indigo-500",children:t.user.fullName}),(0,o.jsx)("p",{title:t.user.email,className:"bg-indigo-100 text-indigo-900 text-sm cursor-pointer w-full truncate",onClick:e=>{e.stopPropagation(),(e=>{const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(t.user.email),n({type:"success",message:"Email copied"})},children:t.user.email})]}),(0,o.jsxs)("div",{className:"hidden sm:block min-w-28 max-w-28",children:[(0,o.jsx)("p",{className:"border-b border-indigo-500 w-full truncate",children:t.location_country||"..."}),(0,o.jsx)("p",{className:"text-xs text-gray-600",children:"country"})]}),(0,o.jsxs)("div",{className:"hidden md:block min-w-28",children:[(0,o.jsx)("p",{className:"border-b border-indigo-500",children:t.step}),(0,o.jsx)("p",{className:"text-xs text-gray-600",children:"last step"})]}),(0,o.jsx)("div",{className:"w-full hidden lg:flex justify-between gap-4",children:(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"w-16 h-16 border border-indigo-300 rounded-full flex items-center justify-center overflow-hidden",children:(0,o.jsxs)("div",{className:"h-full w-full",children:[(0,o.jsx)("p",{className:(0,h.A)("h-2/3 flex items-center justify-center text-white font-bold",{"bg-red-500":0===Number(t.status)&&!t.hasRunStatus,"bg-yellow-600":1===Number(t.status)&&!t.hasRunStatus,"bg-blue-600":2===Number(t.status)&&!t.hasRunStatus,"!bg-green-500":t.hasRunStatus}),children:t.hasRunStatus?"RUN":i[t.status]}),(0,o.jsx)("p",{className:"h-1/3 text-center text-xs border-t border-indigo-300",children:"status"})]})})})})]}),(0,o.jsxs)("div",{className:"block min-w-56",children:[(0,o.jsxs)("div",{className:"flex gap-1",children:[t.cameraStatus&&(0,o.jsx)("div",{className:"border rounded bg-green-700 text-white",children:"Camera approved"}),(0,o.jsx)("button",{className:"border px-2 rounded bg-blue-600 text-white",onClick:async e=>{try{e.stopPropagation(),window.confirm("Approve camera to this user?")&&(await l.A.get(`${r.qp}/applications/camera/${t.token}`),n({type:"success",message:"Camera approved"}))}catch(s){console.log(s)}},children:(0,o.jsx)(u,{className:"size-6"})}),(0,o.jsx)("button",{className:"border px-2 bg-red-500 text-white rounded",onClick:async e=>{try{e.stopPropagation(),window.confirm("Do you really delete this application? Once you click OK, all data related this application will be removed.")&&(await l.A.delete(`${r.qp}/applications/token/${t.token}`),m(t),n({type:"success",message:"Application deleted"}))}catch(s){console.log(s)}},children:(0,o.jsx)(j,{className:"size-6"})})]}),(0,o.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,o.jsx)("small",{className:"mr-2",children:"Started:"}),new Date(t.createdAt).toLocaleString()]}),(0,o.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,o.jsx)("small",{className:"mr-2",children:"Ended:"}),new Date(t.updatedAt).toLocaleString()]})]})]}),c&&(0,o.jsx)(f,{token:t.token}),(0,o.jsx)("div",{className:"absolute top-0 left-0 border-r border-b border-indigo-500 rounded-br-xl text-xs font-medium w-12 text-center",children:s+1})]})},f=e=>{let{token:t}=e;const[s,n]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),[h,m]=(0,a.useState)(null),u=(0,a.useCallback)((async()=>{try{const e=await l.A.get(`${r.qp}/applications/all/token/${t}`);console.log(e.data),c(e.data.application),m(e.data.video)}catch(e){console.log(e)}finally{n(!1)}}),[t]);return(0,a.useEffect)((()=>{const e=setTimeout((()=>{u()}),300);return()=>{e&&clearTimeout(e)}}),[u]),(0,o.jsx)("div",{className:"border-t border-indigo-300 grid sm:grid-cols-2 md:grid-cols-3 mt-2 pt-2",children:s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(x,{width:80,color:"#6366f1"})}),(0,o.jsx)("div",{})]}):d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"p-2",children:(0,o.jsx)("table",{children:(0,o.jsxs)("tbody",{children:[d.user&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Name"}),(0,o.jsx)("td",{children:d.user.fullName})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"email"}),(0,o.jsx)("td",{children:d.user.email})]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Job Search"}),(0,o.jsx)("td",{children:d.jobSearchStatus})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"country"}),(0,o.jsx)("td",{children:d.location_country})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"state"}),(0,o.jsx)("td",{children:d.location_state})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"city"}),(0,o.jsx)("td",{children:d.location_city||"..."})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"will move"}),(0,o.jsx)("td",{children:d.location_isMoving?"Yes":"No"})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"English"}),(0,o.jsx)("td",{children:d.englishLevel})]})]})})}),(0,o.jsx)("div",{className:"p-2",children:(0,o.jsx)("table",{children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"rate/m"}),(0,o.jsxs)("td",{children:["$",d.monthlyRate]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"create"}),(0,o.jsx)("td",{children:new Date(d.createdAt).toLocaleString()})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"update"}),(0,o.jsx)("td",{children:new Date(d.updatedAt).toLocaleString()})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"status"}),(0,o.jsx)("td",{children:i[d.status]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"camera"}),(0,o.jsx)("td",{children:d.cameraStatus?"Yes":"No"})]})]})})}),(0,o.jsx)("div",{className:"p-2",children:(0,o.jsx)("table",{children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"linkedin"}),(0,o.jsx)("td",{children:(0,o.jsx)("a",{href:d.linkedin,target:"_blank",rel:"noreferrer",className:"text-blue-800 underline",children:d.linkedin})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"github"}),(0,o.jsx)("td",{children:(0,o.jsx)("a",{href:d.github,target:"_blank",rel:"noreferrer",className:"text-blue-800 underline",children:d.github})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"custom"}),(0,o.jsx)("td",{children:(0,o.jsx)("a",{href:d.custom,target:"_blank",rel:"noreferrer",className:"text-blue-800 underline",children:d.custom})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"token"}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"text-sm bg-red-900 text-white px-1",children:d.token})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"video"}),(0,o.jsx)("td",{children:s?(0,o.jsx)(o.Fragment,{children:"loading..."}):h&&(0,o.jsxs)("div",{children:[(0,o.jsx)("a",{href:`${r.dZ}/uploads/${h.filename}`,target:"_blank",rel:"noreferrer",download:h.filename,className:"text-blue-700 font-semibold underline",children:h.filename}),(0,o.jsxs)("p",{children:[h.size.toLocaleString(),"B"]}),(0,o.jsx)("p",{children:new Date(h.createdAt).toLocaleString()})]})})]})]})})})]})})},v=()=>{const{applications:e,loadMoreApplications:t,newApplication:s,updateApplication:i,readApplication:h,readApplications:m}=(0,d.A)(),u=(0,c.Y)(),[p,j]=(0,a.useState)(!0),[g,f]=(0,a.useState)({search:"",country:"",lastStep:"",status:"",camera:""}),v=e=>{let{target:{name:t,value:s}}=e;console.log(t,s),f({...g,[t]:s})},y=(0,a.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;j(!0);try{const s=await l.A.get(`${r.qp}/applications?offset=${e}`);t(s.data.applications)}catch(s){console.log(s)}finally{j(!1)}}),[t]);(0,a.useEffect)((()=>{const e=setTimeout((()=>{y()}),300);return()=>{e&&clearTimeout(e)}}),[y]);const w=(0,a.useCallback)((()=>{p||y(e.length)}),[p,e,y]);return(0,a.useEffect)((()=>{const e=setTimeout((()=>{if(u)return u.on("new-application",(e=>{s(e)})),u.on("update-application",(e=>{i(e)})),u.on("read-application",(e=>{h(e)})),u.on("read-applications",(e=>{m(e)})),()=>{u.off("new-application"),u.off("read-application"),u.off("read-applications"),u.off("update-application")}}),300);return()=>{e&&clearTimeout(e)}}),[u,s,i,h,m]),(0,o.jsx)("div",{className:"p-8",children:(0,o.jsxs)("div",{className:"min-h-[60vh] space-y-4",children:[(0,o.jsx)("div",{className:"sticky top-0 z-10 py-2 flex justify-end",children:(0,o.jsxs)("div",{className:"flex items-center justify-end flex-wrap gap-1 bg-[#f3f4f6]",children:[(0,o.jsxs)("div",{className:"max-w-60",children:[(0,o.jsx)("p",{className:"text-xs font-medium text-gray-600 pl-2",children:"Search"}),(0,o.jsx)("input",{className:"w-full bg-white rounded py-1 px-2 border border-[#aaa] outline-[#888]",placeholder:"search name and email",name:"search",value:g.search,onChange:v})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs font-medium text-gray-600 pl-2",children:"Last Step"}),(0,o.jsxs)("select",{className:"bg-white rounded p-1 border border-[#aaa] outline-[#888]",name:"lastStep",value:g.lastStep,onChange:v,children:[(0,o.jsx)("option",{value:"",children:"All"}),n.map(((e,t)=>(0,o.jsx)("option",{value:e,children:e},t)))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs font-medium text-gray-600 pl-2",children:"Status"}),(0,o.jsxs)("select",{className:"bg-white rounded p-1 border border-[#aaa] outline-[#888]",name:"status",value:g.status,onChange:v,children:[(0,o.jsx)("option",{value:"",children:"All"}),(0,o.jsx)("option",{value:1,children:"Viewed"}),(0,o.jsx)("option",{value:2,children:"Copied"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs font-medium text-gray-600 pl-2",children:"Camera Status"}),(0,o.jsxs)("select",{className:"bg-white rounded p-1 border border-[#aaa] outline-[#888]",name:"camera",value:g.camera,onChange:v,children:[(0,o.jsx)("option",{value:"",children:"All"}),(0,o.jsx)("option",{value:1,children:"Approved"}),(0,o.jsx)("option",{value:0,children:"not Appr"})]})]})]})}),e.filter((e=>(-1!==e.user.fullName.indexOf(g.search)||-1!==e.user.email.indexOf(g.search))&&(!g.camera||e.cameraStatus===Boolean(Number(g.camera)))&&(!g.status||e.status.toString()===g.status)&&(!g.lastStep||e.step===g.lastStep))).map(((e,t)=>(0,o.jsx)(b,{apply:e,index:t},e._id))),(0,o.jsxs)("div",{className:"flex justify-stretch items-center",children:[(0,o.jsx)("div",{className:"w-full h-[2px] rounded bg-gray-500"}),(0,o.jsx)("div",{className:"px-4 text-nowrap cursor-pointer border border-gray-400 rounded-lg",onClick:w,children:p?(0,o.jsx)(x,{width:80}):"Load More"}),(0,o.jsx)("div",{className:"w-full h-[2px] rounded bg-gray-500"})]})]})})}}}]);
//# sourceMappingURL=570.c5fa25fc.chunk.js.map